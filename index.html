<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GAME CENTRAL STATION OS ‚Äî Wreck-It Ralph</title>
<meta name="description" content="Game Central Station OS ‚Äî An interactive Wreck-It Ralph arcade management simulator. Fix glitches, battle Ralph, save the games!">
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/global.css">
<style>
/* ‚îÄ‚îÄ STABILITY HUD ‚îÄ‚îÄ */
#stab-hud{position:fixed;top:10px;right:14px;z-index:9000;display:none;flex-direction:column;align-items:flex-end;gap:3px}
.stab-label{font-family:'Press Start 2P',monospace;font-size:6px;color:var(--red)}
.stab-track{width:150px;height:10px;border:2px solid var(--red);background:rgba(255,36,66,.08);overflow:hidden}
.stab-fill{height:100%;width:73%;background:linear-gradient(90deg,var(--red),var(--gold));transition:width .4s}
#stab-pct{font-family:'Press Start 2P',monospace;font-size:6px;color:var(--red)}

/* ‚îÄ‚îÄ SCREENS ‚îÄ‚îÄ */
.screen{position:fixed;inset:0;z-index:100;display:none;flex-direction:column}
.screen.active{display:flex}

/* ‚îÄ‚îÄ BOOT ‚îÄ‚îÄ */
#s-boot{background:#000;align-items:center;justify-content:center;gap:24px}
#boot-ralph{width:160px;animation:float 3s ease-in-out infinite;filter:drop-shadow(0 0 20px rgba(255,36,66,.7))}
.boot-logo h1{font-family:'Press Start 2P',monospace;font-size:clamp(15px,2.5vw,28px);color:var(--red);text-shadow:3px 3px 0 #700,0 0 24px rgba(255,36,66,.4);line-height:1.7;text-align:center;animation:flicker 6s infinite}
.boot-logo h2{font-family:'Press Start 2P',monospace;font-size:clamp(7px,1.1vw,10px);color:var(--gold);text-align:center;letter-spacing:5px;margin-top:8px;animation:float 4s ease-in-out .5s infinite}
.boot-wrap{width:min(480px,82vw);display:flex;flex-direction:column;gap:8px}
#boot-status{font-family:'Press Start 2P',monospace;font-size:7px;color:var(--green);min-height:18px;word-break:break-all}
.boot-track{width:100%;height:22px;border:2px solid var(--green);background:rgba(57,255,20,.05);overflow:hidden}
#boot-fill{height:100%;width:0%;background:linear-gradient(90deg,#005500,var(--green));transition:width .22s}
#boot-pct{font-family:'Press Start 2P',monospace;font-size:7px;color:var(--green);text-align:right}
#boot-warn{display:none;font-family:'Press Start 2P',monospace;font-size:8px;color:var(--red);text-align:center;border:2px solid var(--red);padding:14px;line-height:2;animation:shake .4s ease;background:rgba(255,36,66,.05)}
#boot-enter{display:none;text-align:center;font-family:'Press Start 2P',monospace;font-size:9px;color:var(--gold);animation:blink 1s infinite;cursor:none;padding:12px;margin-top:8px}
.boot-nav-hint{font-family:'Press Start 2P',monospace;font-size:6px;color:rgba(255,255,255,0.3);text-align:center;margin-top:6px}

/* ‚îÄ‚îÄ GAME SELECT ‚îÄ‚îÄ */
#s-games{background:radial-gradient(ellipse at center,#15001e 0%,var(--bg) 70%);padding:0;gap:0;position:relative;flex-direction:column}
.ticker-inside{flex-shrink:0}
.gs-main{flex:1;display:flex;flex-direction:column;gap:12px;padding:14px 18px;overflow-y:auto}
.gs-topbar{display:flex;align-items:center;justify-content:space-between;border-bottom:2px solid var(--red);padding-bottom:10px;flex-wrap:wrap;gap:8px}
.gs-left h1{font-family:'Press Start 2P',monospace;font-size:clamp(9px,1.8vw,15px);color:var(--red);text-shadow:2px 2px 0 #500,0 0 18px rgba(255,36,66,.4)}
.gs-left p{font-size:16px;color:rgba(255,255,255,.4);margin-top:4px}
.gs-nav{display:flex;gap:6px;flex-wrap:wrap}
.nav-tab{font-family:'Press Start 2P',monospace;font-size:6px;padding:6px 10px;background:transparent;cursor:none;border:1px solid rgba(255,255,255,.2);color:rgba(255,255,255,.4);transition:all .1s;text-decoration:none}
.nav-tab:hover,.nav-tab.on{border-color:var(--gold);color:var(--gold);background:rgba(255,215,0,.06)}
#gs-ralph{position:absolute;right:18px;bottom:55px;width:130px;opacity:.15;pointer-events:none;animation:float 4s ease-in-out infinite;z-index:1}
.games-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;position:relative;z-index:2;animation:pixIn .5s ease}
@media(max-width:700px){.games-grid{grid-template-columns:1fr}}
.game-card{border:2px solid rgba(255,36,66,.25);background:rgba(8,3,18,.92);padding:18px;cursor:none;transition:all .18s;position:relative;overflow:hidden;display:flex;flex-direction:column;gap:10px}
.game-card:hover{border-color:var(--red);box-shadow:0 0 22px rgba(255,36,66,.35);transform:translateY(-4px)}
.game-card.shaking{animation:shake .3s infinite}
.card-icon{font-size:44px;text-align:center}
.card-name{font-family:'Press Start 2P',monospace;font-size:8px;color:var(--gold);text-align:center;line-height:1.7}
.card-status{font-size:15px;text-align:center;padding:3px 7px;border:1px solid;font-family:'VT323',monospace}
.s-run{color:var(--green);border-color:var(--green);background:rgba(57,255,20,.08)}
.s-glitch{color:var(--red);border-color:var(--red);background:rgba(255,36,66,.08);animation:blink .6s infinite}
.s-off{color:#555;border-color:#333}
.card-desc{font-size:14px;color:#999;text-align:center;line-height:1.4}
.ralph-badge{position:absolute;bottom:0;left:0;right:0;background:var(--red);color:#fff;font-family:'Press Start 2P',monospace;font-size:6px;padding:4px;text-align:center;animation:blink .5s infinite}
#emergency-btn{font-size:8px;padding:8px 14px;align-self:flex-end}

/* ‚îÄ‚îÄ CHARACTERS ‚îÄ‚îÄ */
#s-chars{background:radial-gradient(ellipse at 30% 50%,#00102a 0%,var(--bg) 65%);padding:14px 18px;gap:12px}
.scr-head{display:flex;align-items:center;gap:14px;padding-bottom:10px}
.scr-head.blue-border{border-bottom:2px solid var(--blue)}
.back-btn{font-family:'Press Start 2P',monospace;font-size:7px;padding:8px 12px;background:transparent;cursor:none;border:2px solid var(--blue);color:var(--blue);transition:all .1s;white-space:nowrap}
.back-btn:hover{background:var(--blue);color:#000}
.scr-title{font-family:'Press Start 2P',monospace;font-size:clamp(9px,1.8vw,14px);color:var(--blue);text-shadow:0 0 18px rgba(0,212,255,.4)}
.scr-sub{font-size:15px;color:#666;margin-top:3px}
.char-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
@media(max-width:600px){.char-grid{grid-template-columns:repeat(2,1fr)}}
.char-card{border:2px solid rgba(0,212,255,.25);background:rgba(0,8,20,.95);padding:14px;cursor:none;transition:all .18s;display:flex;flex-direction:column;align-items:center;gap:7px}
.char-card:hover{border-color:var(--blue);transform:scale(1.04)}
.char-card.sel{border-color:var(--gold);box-shadow:0 0 18px var(--gold)}
.char-card.ralph-card:hover{border-color:var(--red);animation:shake .25s infinite}
.char-emoji{font-size:38px}
.char-name{font-family:'Press Start 2P',monospace;font-size:6px;color:var(--gold);text-align:center;line-height:1.7}
.char-role{font-size:13px;color:#777;text-align:center}
.char-stat{font-size:13px;color:var(--blue);text-align:center}
.detail-box{border:2px solid var(--gold);padding:14px;background:rgba(255,215,0,.03);flex:1;display:flex;flex-direction:column;gap:8px}
.detail-title{font-family:'Press Start 2P',monospace;font-size:9px;color:var(--gold)}
.detail-text{font-size:17px;color:#ccc;line-height:1.5}
.char-footer{display:flex;gap:10px;justify-content:flex-end;margin-top:auto}

/* ‚îÄ‚îÄ REPAIR ‚îÄ‚îÄ */
#s-repair{background:radial-gradient(ellipse at 70% 30%,#1c0010 0%,var(--bg) 65%);padding:14px 18px;gap:12px}
.repair-head{display:flex;align-items:center;gap:14px;flex-wrap:wrap;border-bottom:2px solid var(--purple);padding-bottom:10px}
.repair-title-main{font-family:'Press Start 2P',monospace;font-size:clamp(9px,1.8vw,13px);color:var(--purple);text-shadow:0 0 18px rgba(191,0,255,.4)}
#repair-op{font-size:15px;color:#777;margin-top:3px}
#repair-timer{font-family:'Press Start 2P',monospace;font-size:8px;color:var(--red);margin-left:auto}
.repair-body{display:grid;grid-template-columns:1fr 1fr;gap:14px;flex:1;min-height:0}
@media(max-width:700px){.repair-body{grid-template-columns:1fr}}
.glitch-list{padding:14px;display:flex;flex-direction:column;gap:0;overflow-y:auto}
.glist-title{font-family:'Press Start 2P',monospace;font-size:8px;color:var(--purple);margin-bottom:10px}
.g-item{display:flex;align-items:center;gap:8px;padding:9px 10px;border:1px solid rgba(191,0,255,.25);cursor:none;transition:all .15s;background:rgba(191,0,255,.02);margin-bottom:6px}
.g-item:hover:not(.g-fixed){border-color:var(--purple);background:rgba(191,0,255,.09)}
.g-item.g-active{border-color:var(--gold);background:rgba(255,215,0,.05)}
.g-item.g-fixed{border-color:var(--green);background:rgba(57,255,20,.05);opacity:.55;pointer-events:none}
.g-sev{font-family:'Press Start 2P',monospace;font-size:6px;padding:3px 5px;border:1px solid;white-space:nowrap}
.sev-crit{color:var(--red);border-color:var(--red);animation:blink .5s infinite}
.sev-high{color:#ff8800;border-color:#ff8800}
.sev-med{color:var(--gold);border-color:var(--gold)}
.g-desc{font-size:14px;color:#ccc;flex:1}
.g-icon{font-size:16px}
.repair-right{display:flex;flex-direction:column;gap:10px;padding:14px}
.terminal-box{flex:1;border:2px solid rgba(191,0,255,.4);background:rgba(0,0,0,.85);padding:12px;font-family:'VT323',monospace;font-size:15px;color:var(--green);overflow-y:auto;min-height:100px}
.t-line{margin-bottom:2px}
.minigame-box{border:2px solid var(--gold);padding:12px;background:rgba(255,215,0,.02);display:none;flex-direction:column;gap:8px}
.minigame-box.show{display:flex}
.mg-title{font-family:'Press Start 2P',monospace;font-size:7px;color:var(--gold)}
.mg-desc{font-size:15px;color:#ccc}
.code-field{font-family:'VT323',monospace;font-size:20px;background:#000;border:2px solid var(--green);color:var(--green);padding:7px;width:100%;outline:none;cursor:none}
.code-field:focus{box-shadow:0 0 10px var(--green)}
.mg-hint{font-family:'Press Start 2P',monospace;font-size:6px;color:var(--purple)}
.prog-label{font-family:'Press Start 2P',monospace;font-size:7px;color:var(--purple)}
.prog-track{height:18px;border:2px solid var(--purple);background:rgba(191,0,255,.08);overflow:hidden}
#prog-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--purple),#ff69b4);transition:width .2s}
.repair-actions{display:flex;gap:8px;flex-wrap:wrap}

/* ‚îÄ‚îÄ STATUS ‚îÄ‚îÄ */
#s-status{background:radial-gradient(ellipse at 50% 80%,#001200 0%,var(--bg) 65%);padding:14px 18px;gap:12px}
.status-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;flex:1;min-height:0}
@media(max-width:600px){.status-grid{grid-template-columns:1fr}}
.stat-panel{padding:14px;display:flex;flex-direction:column;gap:0;overflow-y:auto}
.spanel-title{font-family:'Press Start 2P',monospace;font-size:8px;margin-bottom:10px}
.metric-row{display:flex;justify-content:space-between;align-items:center;padding:7px 0;border-bottom:1px solid rgba(255,255,255,.06);font-size:15px}
.m-label{color:#777}
.m-val{font-family:'VT323',monospace;font-size:19px}
.m-val.grn{color:var(--green)}.m-val.red{color:var(--red)}.m-val.gld{color:var(--gold)}.m-val.blu{color:var(--blue)}
.log-list{flex:1;overflow-y:auto;display:flex;flex-direction:column;gap:3px}
.le{padding:3px 8px;border-left:3px solid;font-family:'VT323',monospace;font-size:15px}
.le-info{border-color:var(--blue);color:#a8d8ff}.le-warn{border-color:var(--gold);color:var(--gold)}
.le-error{border-color:var(--red);color:#ff7799;animation:blink 1.2s infinite}.le-success{border-color:var(--green);color:#aaffaa}
.finish-box{grid-column:1/-1;border:2px solid var(--green);padding:20px;background:rgba(57,255,20,.03);display:flex;flex-direction:column;align-items:center;gap:12px}
.finish-title{font-family:'Press Start 2P',monospace;font-size:10px;color:var(--green);text-align:center}
.finish-btns{display:flex;gap:14px;flex-wrap:wrap;justify-content:center}

/* ‚îÄ‚îÄ VICTORY ‚îÄ‚îÄ */
#victory{position:fixed;inset:0;z-index:99980;background:rgba(0,0,0,.96);display:none;align-items:center;justify-content:center;flex-direction:column;gap:18px}
#victory.show{display:flex;animation:pixIn .5s ease}
#victory h1{font-family:'Press Start 2P',monospace;font-size:clamp(18px,4vw,38px);color:var(--gold);text-shadow:4px 4px 0 #775500;animation:float 1.2s ease-in-out infinite;text-align:center}
#v-sub{font-family:'Press Start 2P',monospace;font-size:clamp(7px,1.3vw,11px);color:var(--green);text-align:center;line-height:2.2}
#v-score{font-family:'Press Start 2P',monospace;font-size:clamp(11px,2vw,20px);color:var(--red);text-align:center}
#v-ralph{width:180px;filter:drop-shadow(0 0 22px rgba(255,215,0,.8));animation:float 1.5s ease-in-out infinite}
#v-submit-box{display:flex;gap:8px;align-items:center;flex-wrap:wrap;justify-content:center}
.v-name-input{font-family:'Press Start 2P',monospace;font-size:8px;background:#000;border:2px solid var(--gold);color:var(--gold);padding:8px 12px;outline:none;cursor:none;width:200px}
.v-name-input:focus{box-shadow:0 0 10px var(--gold)}
#confetti{position:fixed;inset:0;pointer-events:none;z-index:99979;overflow:hidden}
.cp{position:absolute;width:9px;height:9px;animation:confettiFall linear forwards}
.brick{position:fixed;width:13px;height:13px;pointer-events:none;z-index:99970;image-rendering:pixelated;animation:brickFall .9s ease forwards}
</style>
</head>
<body>

<div id="cursor">üëä</div>
<div id="scanlines"></div>
<div id="pixelgrid"></div>
<div id="glitch-overlay"></div>

<!-- STABILITY HUD -->
<div id="stab-hud">
  <div class="stab-label">SYS STABILITY</div>
  <div class="stab-track"><div class="stab-fill" id="stab-fill"></div></div>
  <div id="stab-pct">73%</div>
</div>

<!-- VICTORY SCREEN -->
<div id="victory">
  <div id="confetti"></div>
  <svg id="v-ralph" viewBox="0 0 200 280" xmlns="http://www.w3.org/2000/svg">
    <rect x="58" y="125" width="84" height="105" rx="10" fill="#c0392b"/>
    <rect x="72" y="127" width="56" height="55" rx="4" fill="#2471a3"/>
    <ellipse cx="100" cy="100" rx="46" ry="43" fill="#e59866"/>
    <ellipse cx="100" cy="65" rx="42" ry="16" fill="#784212"/>
    <ellipse cx="85" cy="94" rx="9" ry="10" fill="#fff"/>
    <ellipse cx="115" cy="94" rx="9" ry="10" fill="#fff"/>
    <circle cx="87" cy="96" r="5" fill="#1a5276"/>
    <circle cx="117" cy="96" r="5" fill="#1a5276"/>
    <circle cx="89" cy="94" r="2" fill="#000"/>
    <circle cx="119" cy="94" r="2" fill="#000"/>
    <ellipse cx="100" cy="108" rx="7" ry="5" fill="#c9906e"/>
    <path d="M84 118 Q100 132 116 118" stroke="#7b241c" stroke-width="3" fill="none" stroke-linecap="round"/>
    <rect x="4" y="90" width="48" height="32" rx="12" fill="#e59866" transform="rotate(-35,28,106)"/>
    <ellipse cx="14" cy="68" rx="9" ry="13" fill="#e59866"/>
    <rect x="148" y="128" width="44" height="32" rx="12" fill="#e59866"/>
    <rect x="65" y="225" width="28" height="46" rx="8" fill="#6e2c00"/>
    <rect x="107" y="225" width="28" height="46" rx="8" fill="#6e2c00"/>
    <ellipse cx="79" cy="273" rx="19" ry="9" fill="#2c1a00"/>
    <ellipse cx="121" cy="273" rx="19" ry="9" fill="#2c1a00"/>
    <rect x="74" y="126" width="9" height="22" rx="4" fill="#2471a3"/>
    <rect x="117" y="126" width="9" height="22" rx="4" fill="#2471a3"/>
    <circle cx="100" cy="172" r="11" fill="#f1c40f"/>
    <text x="100" y="177" text-anchor="middle" font-size="11" fill="#8b6914">‚òÖ</text>
    <text x="30" y="50" font-size="18" fill="#f1c40f" opacity=".8">‚òÖ</text>
    <text x="160" y="40" font-size="14" fill="#f1c40f" opacity=".7">‚òÖ</text>
    <text x="170" y="150" font-size="12" fill="#f1c40f" opacity=".6">‚òÖ</text>
  </svg>
  <h1>üèÜ GAME FIXED! üèÜ</h1>
  <div id="v-sub">ALL GLITCHES REPAIRED!<br>FIX-IT FELIX APPROVES.<br>RALPH HAS BEEN‚Ä¶ RELOCATED.</div>
  <div id="v-score">SCORE: 0</div>
  <div id="v-submit-box">
    <input class="v-name-input" id="v-name" placeholder="ENTER YOUR NAME" maxlength="12">
    <button class="px-btn blue" onclick="saveToLeaderboard()" style="font-size:7px;padding:8px 14px">üíæ SAVE SCORE</button>
  </div>
  <div style="display:flex;gap:14px;flex-wrap:wrap;justify-content:center;margin-top:6px">
    <button class="px-btn grn" onclick="playAgain()">‚ñ∂ PLAY AGAIN</button>
    <button class="px-btn"     onclick="goStatus()">üìä FULL REPORT</button>
    <a class="px-btn" href="pages/leaderboard.html">üèÜ LEADERBOARD</a>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SCREEN 1: BOOT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="screen active" id="s-boot">
  <svg id="boot-ralph" viewBox="0 0 200 280" xmlns="http://www.w3.org/2000/svg">
    <rect x="58" y="125" width="84" height="105" rx="10" fill="#c0392b"/>
    <rect x="72" y="127" width="56" height="55" rx="4" fill="#2471a3"/>
    <ellipse cx="100" cy="100" rx="46" ry="43" fill="#e59866"/>
    <ellipse cx="100" cy="65" rx="42" ry="16" fill="#784212"/>
    <ellipse cx="72"  cy="70" rx="14" ry="10" fill="#784212"/>
    <ellipse cx="128" cy="70" rx="14" ry="10" fill="#784212"/>
    <ellipse cx="85" cy="94" rx="9" ry="10" fill="#fff"/>
    <ellipse cx="115" cy="94" rx="9" ry="10" fill="#fff"/>
    <circle cx="87" cy="96" r="5" fill="#1a5276"/>
    <circle cx="117" cy="96" r="5" fill="#1a5276"/>
    <circle cx="89" cy="94" r="2" fill="#000"/>
    <circle cx="119" cy="94" r="2" fill="#000"/>
    <ellipse cx="100" cy="108" rx="7" ry="5" fill="#c9906e"/>
    <path d="M86 120 Q100 113 114 120" stroke="#7b241c" stroke-width="3" fill="none" stroke-linecap="round"/>
    <rect x="-2" y="115" width="54" height="34" rx="14" fill="#e59866" transform="rotate(-22,25,132)"/>
    <ellipse cx="4"  cy="98" rx="16" ry="14" fill="#e59866"/>
    <rect x="148" y="115" width="54" height="34" rx="14" fill="#e59866" transform="rotate(22,175,132)"/>
    <ellipse cx="196" cy="98" rx="16" ry="14" fill="#e59866"/>
    <rect x="65" y="225" width="28" height="46" rx="8" fill="#6e2c00"/>
    <rect x="107" y="225" width="28" height="46" rx="8" fill="#6e2c00"/>
    <ellipse cx="79"  cy="273" rx="19" ry="9" fill="#2c1a00"/>
    <ellipse cx="121" cy="273" rx="19" ry="9" fill="#2c1a00"/>
    <rect x="74"  y="126" width="9" height="22" rx="4" fill="#2471a3"/>
    <rect x="117" y="126" width="9" height="22" rx="4" fill="#2471a3"/>
    <rect x="78" y="148" width="44" height="16" rx="3" fill="#fff" opacity=".9"/>
    <text x="100" y="160" text-anchor="middle" font-family="monospace" font-size="9" fill="#c0392b" font-weight="bold">RALPH</text>
  </svg>

  <div class="boot-logo">
    <h1>GAME CENTRAL<br>STATION OS</h1>
    <h2>v2.4.1 ‚Äî RALPH EDITION</h2>
  </div>

  <div class="boot-wrap">
    <div id="boot-status">INITIALIZING‚Ä¶</div>
    <div class="boot-track"><div id="boot-fill"></div></div>
    <div id="boot-pct">0%</div>
    <div id="boot-warn">‚ö† RALPH DETECTED IN SYSTEM<br>STRUCTURAL INTEGRITY: COMPROMISED<br>(ARE WE SURE WE WANT TO BOOT?)</div>
    <div id="boot-enter" onclick="enterSystem()">‚ñ∂ CLICK ANYWHERE TO ENTER ‚óÄ</div>
    <div class="boot-nav-hint">NEW HERE? <a href="pages/how-to-play.html" style="color:var(--gold);text-decoration:none">READ THE HOW TO PLAY GUIDE ‚Üí</a></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SCREEN 2: GAME SELECT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="screen" id="s-games">
  <div class="ticker-inside ticker-bar">
    <span class="ticker-inner">
      ‚ö° WELCOME TO GAME CENTRAL STATION OS &nbsp;‚Ä¢&nbsp; üè† FIX-IT FELIX JR ‚Äî RALPH DETECTED &nbsp;‚Ä¢&nbsp;
      üî´ HERO'S DUTY ‚Äî ONLINE &nbsp;‚Ä¢&nbsp; üç≠ SUGAR RUSH ‚Äî OFFLINE &nbsp;‚Ä¢&nbsp;
      ‚ö† SYSTEM STABILITY: DROPPING &nbsp;‚Ä¢&nbsp; üí• DO NOT LET RALPH WIN &nbsp;‚Ä¢&nbsp;
      üìñ NEW? CHECK THE HOW TO PLAY PAGE &nbsp;&nbsp;&nbsp;
    </span>
  </div>

  <svg id="gs-ralph" viewBox="0 0 200 280" xmlns="http://www.w3.org/2000/svg">
    <rect x="58" y="125" width="84" height="105" rx="10" fill="#c0392b"/>
    <rect x="72" y="127" width="56" height="55" rx="4" fill="#2471a3"/>
    <ellipse cx="100" cy="100" rx="46" ry="43" fill="#e59866"/>
    <ellipse cx="100" cy="65" rx="42" ry="16" fill="#784212"/>
    <ellipse cx="85" cy="94" rx="9" ry="10" fill="#fff"/>
    <ellipse cx="115" cy="94" rx="9" ry="10" fill="#fff"/>
    <circle cx="89" cy="94" r="2" fill="#000"/>
    <circle cx="119" cy="94" r="2" fill="#000"/>
    <path d="M86 120 Q100 113 114 120" stroke="#7b241c" stroke-width="3" fill="none" stroke-linecap="round"/>
    <rect x="-2" y="115" width="54" height="34" rx="14" fill="#e59866" transform="rotate(-22,25,132)"/>
    <rect x="148" y="115" width="54" height="34" rx="14" fill="#e59866" transform="rotate(22,175,132)"/>
    <rect x="65" y="225" width="28" height="46" rx="8" fill="#6e2c00"/>
    <rect x="107" y="225" width="28" height="46" rx="8" fill="#6e2c00"/>
    <ellipse cx="79" cy="273" rx="19" ry="9" fill="#2c1a00"/>
    <ellipse cx="121" cy="273" rx="19" ry="9" fill="#2c1a00"/>
  </svg>

  <div class="gs-main">
    <div class="gs-topbar">
      <div class="gs-left">
        <h1 class="gt" data-t="GAME CENTRAL STATION">GAME CENTRAL STATION</h1>
        <p>SELECT A GAME ‚Äî RALPH IS LOOSE. ACT FAST.</p>
      </div>
      <div class="gs-nav">
        <button class="nav-tab on">üéÆ GAMES</button>
        <button class="nav-tab" onclick="goScreen('s-status')">üìä STATUS</button>
        <button class="nav-tab" onclick="doEmergency()">‚ö° EMERGENCY</button>
        <a class="nav-tab" href="pages/how-to-play.html">üìñ HOW TO PLAY</a>
        <a class="nav-tab" href="pages/leaderboard.html">üèÜ LEADERBOARD</a>
        <a class="nav-tab" href="pages/about.html">‚Ñπ ABOUT</a>
      </div>
    </div>

    <!-- BEGINNER HINT BAR -->
    <div id="hint-bar" style="background:rgba(0,212,255,0.06);border:1px solid rgba(0,212,255,0.3);padding:10px 14px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px">
      <span style="font-family:'Press Start 2P',monospace;font-size:6px;color:var(--blue)">üí° HOW TO PLAY: Click a game card ‚Üí Pick a character ‚Üí Type repair codes ‚Üí Fix all glitches ‚Üí WIN!</span>
      <button onclick="document.getElementById('hint-bar').style.display='none'" style="font-family:'Press Start 2P',monospace;font-size:6px;color:var(--blue);background:transparent;border:1px solid var(--blue);padding:4px 8px;cursor:none">‚úï DISMISS</button>
    </div>

    <div class="games-grid" id="games-grid"></div>
    <div style="display:flex;justify-content:flex-end">
      <button class="px-btn red" id="emergency-btn" onclick="doEmergency()">‚ö° EMERGENCY GAME JUMP</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SCREEN 3: CHARACTERS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="screen" id="s-chars">
  <div class="scr-head blue-border">
    <button class="back-btn" onclick="goScreen('s-games')">‚óÄ BACK</button>
    <div>
      <div class="scr-title" id="char-title">CHARACTER CONTROL PANEL</div>
      <div class="scr-sub" id="char-sub">GAME: ‚Äî</div>
    </div>
  </div>
  <!-- Instruction hint -->
  <div style="background:rgba(255,215,0,0.04);border:1px solid rgba(255,215,0,0.2);padding:8px 14px;font-family:'Press Start 2P',monospace;font-size:6px;color:rgba(255,215,0,0.6);line-height:2">
    ‚¨Ü SELECT A TECHNICIAN TO SEND ON THE REPAIR MISSION. AVOID RALPH ‚Äî HE MAKES THINGS WORSE!
  </div>
  <div class="char-grid" id="char-grid"></div>
  <div class="detail-box panel" id="detail-box">
    <div class="detail-title" id="detail-title">üëÜ SELECT A CHARACTER ABOVE</div>
    <div class="detail-text" id="detail-text">Click any character to view their status and deploy them on a repair mission. Each character has unique traits ‚Äî choose wisely!</div>
  </div>
  <div class="char-footer">
    <button class="px-btn" onclick="goScreen('s-games')">‚óÄ GAMES</button>
    <button class="px-btn blue" id="proceed-btn" disabled onclick="goRepair()">GLITCH REPAIR ‚ñ∂</button>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SCREEN 4: GLITCH REPAIR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="screen" id="s-repair">
  <div class="repair-head">
    <button class="back-btn" style="border-color:var(--purple);color:var(--purple)" onclick="goScreen('s-chars')">‚óÄ BACK</button>
    <div>
      <div class="repair-title-main">‚ö° GLITCH REPAIR SYSTEM ‚ö°</div>
      <div id="repair-op">OPERATOR: ‚Äî</div>
    </div>
    <div id="repair-timer">TIME: 00:00</div>
  </div>
  <!-- Instructions row -->
  <div style="background:rgba(191,0,255,0.05);border:1px solid rgba(191,0,255,0.2);padding:8px 14px;font-family:'Press Start 2P',monospace;font-size:6px;color:rgba(191,0,255,0.7);line-height:2;flex-shrink:0">
    1. CLICK A GLITCH FROM THE LEFT LIST &nbsp;‚Üí&nbsp; 2. READ THE HINT &nbsp;‚Üí&nbsp; 3. TYPE THE CODE &nbsp;‚Üí&nbsp; 4. PRESS ENTER &nbsp;‚Üí&nbsp; 5. FIX ALL TO WIN!
  </div>
  <div class="repair-body">
    <div class="glitch-list panel">
      <div class="glist-title">‚ö† ACTIVE GLITCHES ‚Äî CLICK TO SELECT</div>
      <div id="glitch-items"></div>
    </div>
    <div class="repair-right panel">
      <div class="prog-label" id="prog-label">REPAIR PROGRESS: 0%</div>
      <div class="prog-track"><div id="prog-fill"></div></div>
      <div class="terminal-box" id="terminal"></div>
      <div class="minigame-box" id="minigame">
        <div class="mg-title" id="mg-title">üéØ REPAIR CHALLENGE</div>
        <div class="mg-desc"  id="mg-desc">Type the repair code:</div>
        <input class="code-field" id="code-field" autocomplete="off" spellcheck="false" placeholder="TYPE CODE HERE‚Ä¶">
        <div class="mg-hint"  id="mg-hint"></div>
      </div>
      <div class="repair-actions">
        <button class="px-btn blue" id="auto-btn" onclick="doAuto()">ü§ñ AUTO REPAIR (x3)</button>
        <button class="px-btn red"  onclick="doRalph()">üí• RALPH BTN</button>
        <button class="px-btn grn"  id="finish-btn" onclick="doFinish()" style="display:none">‚úÖ RESTART GAME</button>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SCREEN 5: STATUS MONITOR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="screen" id="s-status">
  <div class="scr-head" style="border-bottom:2px solid var(--green);padding-bottom:10px">
    <button class="back-btn" style="border-color:var(--green);color:var(--green)" onclick="goScreen('s-games')">‚óÄ BACK</button>
    <div class="scr-title" style="color:var(--green);text-shadow:0 0 18px rgba(57,255,20,.4)">üìä GAME STATUS MONITOR</div>
  </div>
  <div class="status-grid">
    <div class="stat-panel panel">
      <div class="spanel-title" style="color:var(--green)">üìà SYSTEM METRICS</div>
      <div class="metric-row"><span class="m-label">RALPH INCIDENTS</span><span class="m-val red" id="m-ralph">0</span></div>
      <div class="metric-row"><span class="m-label">GLITCHES FIXED</span><span class="m-val grn" id="m-fixed">0</span></div>
      <div class="metric-row"><span class="m-label">GAMES ONLINE</span><span class="m-val gld">2 / 3</span></div>
      <div class="metric-row"><span class="m-label">VANELLOPE STATUS</span><span class="m-val blu">GLITCHING</span></div>
      <div class="metric-row"><span class="m-label">UPTIME</span><span class="m-val grn" id="m-uptime">0:00:00</span></div>
      <div class="metric-row"><span class="m-label">CURRENT SCORE</span><span class="m-val gld" id="m-score">0</span></div>
      <div class="metric-row"><span class="m-label">STABILITY</span><span class="m-val grn" id="m-stab">73%</span></div>
    </div>
    <div class="stat-panel panel">
      <div class="spanel-title" style="color:var(--blue)">üìã SYSTEM LOG</div>
      <div class="log-list" id="log-list"></div>
    </div>
    <div class="finish-box">
      <div class="finish-title">MISSION STATUS</div>
      <div style="font-size:16px;color:#aaa">Complete all glitch repairs then restart the game!</div>
      <div class="finish-btns">
        <button class="px-btn grn" onclick="doFinish()">‚ñ∂ RESTART GAME</button>
        <button class="px-btn"     onclick="goScreen('s-repair')">‚óÄ REPAIR</button>
        <button class="px-btn red" onclick="doRalph()">üí• SUMMON RALPH</button>
        <a class="px-btn" href="pages/leaderboard.html">üèÜ LEADERBOARD</a>
      </div>
    </div>
  </div>
</div>

<script>
"use strict";
// ‚îÄ‚îÄ CURSOR ‚îÄ‚îÄ
const cur=document.getElementById('cursor');
document.addEventListener('mousemove',e=>{cur.style.left=e.clientX+'px';cur.style.top=e.clientY+'px'});

// ‚îÄ‚îÄ STATE ‚îÄ‚îÄ
let S={stability:73,game:null,char:null,glitches:[],fixed:0,ralphHits:0,score:0,autoLeft:3,startMs:0,stabIv:null,timerIv:null,curIdx:null};

// ‚îÄ‚îÄ DATA ‚îÄ‚îÄ
const GAMES=[
  {id:'felix',name:"FIX-IT FELIX JR.",icon:'üè†',status:'glitch',stText:'‚ö† RALPH DETECTED',desc:'Classic fix-it game. Under attack. Again.',ralph:true,
   chars:[
    {n:'FIX-IT FELIX',e:'üî®',role:'Hero / Best Repair Tech',stat:'HAMMER: 94%',detail:"Status: FIXING EVERYTHING. Hammer Charge: 94%. Mood: Earnestly Optimistic. Has said 'I can fix it!' 47 times today. RECOMMENDED for this mission."},
    {n:'WRECK-IT RALPH',e:'üëä',role:'Villain ‚Äî DO NOT SELECT',stat:'DAMAGE: MAX',isRalph:true,detail:"‚ö† ALERT ‚ö† Status: GOING ROGUE. Damage Level: CATASTROPHIC. Things broken: 23. Things fixed: 0. Selecting Ralph will DESTROY system integrity! RECOMMEND CONTAINMENT IMMEDIATELY."},
    {n:'SGT. CALHOUN',e:'üíÇ',role:'Commander',stat:'THREAT: MAX',detail:"Status: HUNTING CY-BUGS. Currently yelling at someone. Cy-Bug kills today: 847. Mood: Professionally Furious. Effective repair tech despite the attitude."},
    {n:'VANELLOPE',e:'üèéÔ∏è',role:'Glitch Specialist',stat:'GLITCH: 60%',detail:"Status: PHASING THROUGH 3 WALLS SIMULTANEOUSLY. Mood: Aggressively Cheerful. She understands glitches because she IS one ‚Äî great for glitch repair!"}
   ],
   glitches:[
    {desc:"Ralph's muddy footprints across 5 levels",sev:'crit',code:'CLEANUP',pts:300},
    {desc:"Building texture corrupted at floor 8",sev:'high',code:'FIXWALL',pts:200},
    {desc:"Score counter overflowed (Ralph's score: -‚àû)",sev:'med',code:'RESET',pts:100},
    {desc:"Vanellope glitching through finish line",sev:'crit',code:'ANCHOR',pts:300}
   ]
  },
  {id:'duty',name:"HERO'S DUTY",icon:'üî´',status:'run',stText:'‚úì ONLINE',desc:"First-person shooter. Cy-Bugs contained. For now.",ralph:false,
   chars:[
    {n:'CALHOUN',e:'üíÇ',role:'Lead Commander',stat:'AMMO: 847',detail:"Cy-Bug kills today: 847. Unauthorized detentions: 1 (Ralph). Mood: Excellent and terrifying. Best repair tech for Hero's Duty."},
    {n:'CY-BUG #4471',e:'ü™≤',role:'Escaped Enemy',stat:'THREAT: ACTIVE',detail:"Status: ESCAPED CONTAINMENT. Getting smarter with each power-up consumed. Cannot be selected for repairs ‚Äî it IS the problem!"},
    {n:'SOLDIER NPC',e:'ü™ñ',role:'Support Unit',stat:'HP: 100',detail:"Has been standing in the same spot for 4 hours. Existential crisis: 12%. Still reporting for duty. Reliable repair assistant."},
    {n:'THE MEDAL',e:'üèÖ',role:'Mission Objective',stat:'SECURED: YES',detail:"Was briefly stolen by a large brick-handed man. Recovered. Now bolted to wall with 6 inch steel bolts. Inspirational object only ‚Äî cannot repair."}
   ],
   glitches:[
    {desc:"Cy-Bug escaped containment grid",sev:'crit',code:'CONTAIN',pts:300},
    {desc:"Ralph took the medal (again, somehow)",sev:'high',code:'RETRIEVE',pts:200},
    {desc:"Beacon tower signal corrupted",sev:'med',code:'BEACON',pts:100}
   ]
  },
  {id:'sugar',name:"SUGAR RUSH",icon:'üç≠',status:'off',stText:'‚úó OFFLINE',desc:"Racing game. Power cable unplugged. Blame Ralph.",ralph:false,
   chars:[
    {n:'VANELLOPE',e:'üèéÔ∏è',role:'Star Racer',stat:'OFFLINE',detail:"Last race: 1st place, mid-glitch. Current mood: 'Whatever I don't care.' (She cares enormously.) Best tech for Sugar Rush."},
    {n:'KING CANDY',e:'üëë',role:'DELETED',stat:'DELETED',detail:"Status: PERMANENTLY DELETED. Was actually Turbo the whole time. Gone forever. Presumably."},
    {n:'TAFFYTA M.',e:'üçã',role:'Rival Racer',stat:'WINS: 14',detail:"Sportsmanship rating: 2/100. Win rate: 78%. Cherry-themed car: operational. Can assist with candy-related repairs."},
    {n:'JUBILEENA',e:'üçí',role:'Background Racer',stat:'EXISTS: YES',detail:"Has competed in 23 races. No one remembers her. She is fine with this. Cherry-themed car: operational. Spirit: unbroken. Solid repair tech!"}
   ],
   glitches:[
    {desc:"Power cable unplugged (Ralph, probably)",sev:'crit',code:'RECONNECT',pts:300},
    {desc:"King Candy residual code detected in memory",sev:'high',code:'PURGE',pts:200},
    {desc:"Racing track candy texture missing",sev:'med',code:'RETEXTURE',pts:100}
   ]
  }
];

// ‚îÄ‚îÄ UTILS ‚îÄ‚îÄ
function doGlitch(){const o=document.getElementById('glitch-overlay');o.classList.remove('pop');void o.offsetWidth;o.classList.add('pop');setTimeout(()=>o.classList.remove('pop'),360)}
function shakeBody(){document.body.style.animation='shake .35s ease';setTimeout(()=>document.body.style.animation='',360)}
function goScreen(id){document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));document.getElementById(id).classList.add('active');doGlitch()}
function addLog(type,msg){const list=document.getElementById('log-list');const ts=new Date().toLocaleTimeString('en',{hour12:false});const d=document.createElement('div');d.className='le le-'+type;d.textContent='['+ts+'] '+msg;list.appendChild(d);list.scrollTop=list.scrollHeight}
function tPrint(text,color='var(--green)'){const t=document.getElementById('terminal');const d=document.createElement('div');d.className='t-line';d.style.color=color;d.textContent=text;t.appendChild(d);t.scrollTop=t.scrollHeight}
function updateMetrics(){document.getElementById('m-ralph').textContent=S.ralphHits;document.getElementById('m-fixed').textContent=S.fixed;document.getElementById('m-score').textContent=S.score;document.getElementById('m-stab').textContent=Math.round(S.stability)+'%';document.getElementById('m-stab').className='m-val '+(S.stability>50?'grn':S.stability>25?'gld':'red')}

// ‚îÄ‚îÄ BRICKS ‚îÄ‚îÄ
function bricks(){const cols=['#8B4513','#A0522D','#CD853F','#D2691E','#8B0000'];for(let i=0;i<18;i++)setTimeout(()=>{const p=document.createElement('div');p.className='brick';p.style.cssText=`background:${cols[~~(Math.random()*cols.length)]};left:${15+Math.random()*70}vw;top:${5+Math.random()*50}vh;--tx:${(Math.random()-.5)*280}px;--ty:${50+Math.random()*200}px;--rot:${Math.random()*400}deg`;document.body.appendChild(p);setTimeout(()=>p.remove(),920)},i*28)}

// ‚îÄ‚îÄ CONFETTI ‚îÄ‚îÄ
function spawnConfetti(){const c=document.getElementById('confetti');const cols=['#ffd700','#ff2442','#00d4ff','#39ff14','#bf00ff','#ff69b4','#fff'];for(let i=0;i<90;i++)setTimeout(()=>{const p=document.createElement('div');p.className='cp';p.style.cssText=`left:${Math.random()*100}vw;background:${cols[~~(Math.random()*cols.length)]};width:${6+Math.random()*10}px;height:${6+Math.random()*10}px;border-radius:${Math.random()>.5?'50%':'0'};animation-duration:${1.4+Math.random()*2}s;animation-delay:${Math.random()*.8}s`;c.appendChild(p)},i*15)}

// ‚îÄ‚îÄ BOOT ‚îÄ‚îÄ
const BOOT_MSGS=['LOADING KERNEL MODULES‚Ä¶','CONNECTING TO ARCADE NETWORK‚Ä¶','SCANNING FOR RALPH‚Ä¶ (FOUND 1)','ATTEMPTING RALPH CONTAINMENT‚Ä¶','‚Ä¶RALPH PARTIALLY CONTAINED‚Ä¶','LOADING CHARACTER DATABASE‚Ä¶','INITIALIZING GLITCH DETECTION‚Ä¶','‚ö† HIGH RALPH ACTIVITY DETECTED','STABILITY: 73% (BELOW OPTIMAL)','FINAL CHECKS COMPLETE‚Ä¶'];
let bp=0,bmi=0,bHes=false,bootRunning=false;

function runBoot(){
  if(bootRunning)return; bootRunning=true;
  const fill=document.getElementById('boot-fill'),stat=document.getElementById('boot-status'),pct=document.getElementById('boot-pct'),warn=document.getElementById('boot-warn'),ent=document.getElementById('boot-enter');
  const iv=setInterval(()=>{
    if(bp===67&&!bHes){bHes=true;stat.textContent='‚Ä¶ARE WE SURE ABOUT THIS‚Ä¶';stat.style.color='var(--red)';clearInterval(iv);bootRunning=false;
      setTimeout(()=>{stat.style.color='var(--green)';stat.textContent='OKAY. CONTINUING. RALPH PLEASE BEHAVE.';bp-=9;runBoot()},2400);return}
    bp=Math.min(100,bp+(Math.random()>.65?2:1));fill.style.width=bp+'%';pct.textContent=bp+'%';
    if(bmi<BOOT_MSGS.length&&bp>bmi*10)stat.textContent=BOOT_MSGS[bmi++];
    if(bp>=72&&bp<=75&&warn.style.display===''){warn.style.display='block';shakeBody()}
    if(bp>=100){clearInterval(iv);bootRunning=false;stat.textContent='SYSTEM READY. RALPH IS SOMEWHERE ON PREMISES.';fill.style.background='linear-gradient(90deg,#005500,var(--green))';setTimeout(()=>ent.style.display='block',700)}
  },90);
}

function enterSystem(){doGlitch();setTimeout(()=>{goScreen('s-games');document.getElementById('stab-hud').style.display='flex';S.startMs=Date.now();populateGames();startStab();startTimer();addLog('info','System boot complete. Welcome to Game Central Station.');addLog('warn','Ralph detected on premises. Stay alert.');addLog('info','TIP: Click a game card to start. Need help? Visit How To Play.')},380)}
document.getElementById('s-boot').addEventListener('click',()=>{if(bp>=100)enterSystem()});

// ‚îÄ‚îÄ GAMES GRID ‚îÄ‚îÄ
function populateGames(){const grid=document.getElementById('games-grid');grid.innerHTML='';GAMES.forEach(g=>{const d=document.createElement('div');d.className='game-card shine-card'+(g.status==='glitch'?' shaking':'');d.innerHTML=`<div class="card-icon">${g.icon}</div><div class="card-name">${g.name}</div><div class="card-status s-${g.status==='glitch'?'glitch':g.status==='run'?'run':'off'}">${g.stText}</div><div class="card-desc">${g.desc}</div>${g.ralph?'<div class="ralph-badge">‚ö† RALPH ACTIVE ‚ö†</div>':''}`;d.addEventListener('click',()=>selectGame(g));grid.appendChild(d)})}

// ‚îÄ‚îÄ SELECT GAME ‚îÄ‚îÄ
function selectGame(g){S.game=g;document.getElementById('char-title').textContent='CHARACTER CONTROL PANEL';document.getElementById('char-sub').textContent='GAME: '+g.name;populateChars(g);goScreen('s-chars');addLog('info','Accessed '+g.name+' character panel.')}

// ‚îÄ‚îÄ CHARS ‚îÄ‚îÄ
function populateChars(g){const grid=document.getElementById('char-grid');grid.innerHTML='';g.chars.forEach(ch=>{const d=document.createElement('div');d.className='char-card shine-card'+(ch.isRalph?' ralph-card':'');d.innerHTML=`<div class="char-emoji">${ch.e}</div><div class="char-name">${ch.n}</div><div class="char-role">${ch.role}</div><div class="char-stat">${ch.stat}</div>`;d.addEventListener('click',()=>selectChar(ch,d));grid.appendChild(d)})}

function selectChar(ch,el){document.querySelectorAll('.char-card').forEach(c=>c.classList.remove('sel'));el.classList.add('sel');S.char=ch;document.getElementById('detail-title').textContent='‚ñ∂ '+ch.n+' ‚Äî STATUS';document.getElementById('detail-text').textContent=ch.detail;document.getElementById('proceed-btn').disabled=false;if(ch.isRalph){shakeBody();doGlitch();bricks();S.stability=Math.max(5,S.stability-15);S.ralphHits++;updateMetrics();addLog('error','‚ö† RALPH SELECTED! System integrity dropping! Select someone else!')}else{addLog('info','Character selected: '+ch.n+'. Click GLITCH REPAIR to continue.')}}

// ‚îÄ‚îÄ REPAIR INIT ‚îÄ‚îÄ
function goRepair(){if(!S.char)return;S.glitches=S.game.glitches.map(g=>({...g,fixed:false}));S.autoLeft=3;document.getElementById('repair-op').textContent='OPERATOR: '+S.char.n+' | GAME: '+S.game.name;document.getElementById('auto-btn').textContent='ü§ñ AUTO REPAIR (x3)';document.getElementById('auto-btn').disabled=false;document.getElementById('finish-btn').style.display='none';document.getElementById('terminal').innerHTML='';document.getElementById('minigame').classList.remove('show');renderGList();updateProg();goScreen('s-repair');addLog('info','Repair initiated by '+S.char.n+'.');tPrint('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê','var(--gold)');tPrint('  GAME CENTRAL STATION REPAIR v2.4','var(--gold)');tPrint('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê','var(--gold)');tPrint('OPERATOR: '+S.char.n,'var(--blue)');tPrint('GAME: '+S.game.name,'var(--blue)');tPrint('GLITCHES FOUND: '+S.glitches.length,'var(--red)');tPrint('‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ','#333');tPrint('‚ñ∂ Click a glitch from the list to begin‚Ä¶','#666')}

// ‚îÄ‚îÄ GLITCH LIST ‚îÄ‚îÄ
function renderGList(){const c=document.getElementById('glitch-items');c.innerHTML='';S.glitches.forEach((g,i)=>{const d=document.createElement('div');d.className='g-item'+(g.fixed?' g-fixed':'');d.id='gi'+i;d.innerHTML=`<span class="g-sev sev-${g.sev}">${g.sev.toUpperCase()}</span><span class="g-desc">${g.desc}</span><span class="g-icon">${g.fixed?'‚úÖ':'üî¥'}</span>`;if(!g.fixed)d.addEventListener('click',()=>startRepair(i));c.appendChild(d)})}

// ‚îÄ‚îÄ START REPAIR ‚îÄ‚îÄ
function startRepair(idx){if(S.glitches[idx].fixed)return;S.curIdx=idx;const g=S.glitches[idx];document.querySelectorAll('.g-item').forEach(x=>x.classList.remove('g-active'));const el=document.getElementById('gi'+idx);if(el)el.classList.add('g-active');document.getElementById('terminal').innerHTML='';tPrint('‚ïê‚ïê REPAIR SEQUENCE #'+(idx+1)+' ‚ïê‚ïê','var(--gold)');tPrint('SEVERITY: '+g.sev.toUpperCase()+(g.sev==='crit'?' ‚ö† CRITICAL':''),'var(--red)');tPrint('ISSUE: '+g.desc,'#ccc');tPrint('','');tPrint('ANALYZING GLITCH‚Ä¶','var(--purple)');setTimeout(()=>{tPrint('ANALYSIS COMPLETE.','var(--purple)');tPrint('ENTER REPAIR CODE BELOW TO FIX:','var(--green)');doGlitch();showMG(g,idx)},700)}

// ‚îÄ‚îÄ MINIGAME ‚îÄ‚îÄ
function showMG(g,idx){const box=document.getElementById('minigame'),cf=document.getElementById('code-field');document.getElementById('mg-title').textContent='üéØ REPAIR CHALLENGE ‚Äî '+g.sev.toUpperCase()+' SEVERITY';document.getElementById('mg-desc').textContent='Fix: "'+g.desc+'"';document.getElementById('mg-hint').textContent='‚ñ∂ HINT: Type the code ‚Üí '+g.code+' ‚Üê then press ENTER';cf.value='';cf.placeholder='TYPE THE REPAIR CODE AND PRESS ENTER‚Ä¶';box.classList.add('show');cf.focus();cf.onkeydown=null;cf.onkeydown=e=>{if(e.key!=='Enter')return;const v=cf.value.trim().toUpperCase();if(v===g.code){fixGlitch(idx)}else{doGlitch();shakeBody();tPrint('‚úó WRONG CODE: "'+v+'" ‚Äî Try again!','var(--red)');cf.value='';cf.style.borderColor='var(--red)';S.stability=Math.max(5,S.stability-3);addLog('warn','Wrong code entered. Stability -3%.');setTimeout(()=>cf.style.borderColor='var(--green)',500)}}}

// ‚îÄ‚îÄ FIX GLITCH ‚îÄ‚îÄ
function fixGlitch(idx){S.glitches[idx].fixed=true;S.fixed++;const pts=S.glitches[idx].pts;S.score+=pts;S.stability=Math.min(100,S.stability+8);document.getElementById('minigame').classList.remove('show');tPrint('','');tPrint('‚úÖ REPAIR SUCCESSFUL!','var(--green)');tPrint('+'+pts+' SCORE EARNED','var(--gold)');tPrint(S.fixed+'/'+S.glitches.length+' GLITCHES FIXED','var(--blue)');addLog('success','Repaired: '+S.glitches[idx].desc.slice(0,40)+'‚Ä¶');renderGList();updateProg();updateMetrics();if(S.fixed>=S.glitches.length)setTimeout(()=>{tPrint('','');tPrint('üèÜ ALL GLITCHES FIXED!','var(--gold)');tPrint('CLICK "RESTART GAME" TO FINISH!','var(--gold)');document.getElementById('finish-btn').style.display='inline-block';addLog('success','ALL GLITCHES REPAIRED! Click Restart Game!')},500)}

// ‚îÄ‚îÄ PROGRESS ‚îÄ‚îÄ
function updateProg(){const pct=Math.round((S.fixed/Math.max(1,S.glitches.length))*100);document.getElementById('prog-fill').style.width=pct+'%';document.getElementById('prog-label').textContent='REPAIR PROGRESS: '+pct+'% ('+S.fixed+'/'+S.glitches.length+' FIXED)'}

// ‚îÄ‚îÄ AUTO REPAIR ‚îÄ‚îÄ
function doAuto(){if(S.autoLeft<=0)return;const i=S.glitches.findIndex(g=>!g.fixed);if(i===-1){tPrint('All glitches already fixed!','var(--green)');return}S.autoLeft--;document.getElementById('auto-btn').textContent='ü§ñ AUTO REPAIR (x'+S.autoLeft+')';if(S.autoLeft===0)document.getElementById('auto-btn').disabled=true;document.getElementById('minigame').classList.remove('show');tPrint('ü§ñ AUTO-REPAIR BOT DEPLOYING‚Ä¶','var(--blue)');tPrint('Fixing: '+S.glitches[i].desc,'#aaa');S.curIdx=i;let p=0;const iv=setInterval(()=>{p+=8;if(p>=100){clearInterval(iv);fixGlitch(i)}},60);doGlitch();addLog('info','Auto-repair used. '+S.autoLeft+' remaining.')}

// ‚îÄ‚îÄ RALPH BUTTON ‚îÄ‚îÄ
function doRalph(){S.ralphHits++;S.stability=Math.max(5,S.stability-22);S.score=Math.max(0,S.score-150);bricks();shakeBody();doGlitch();addLog('error','üí• RALPH INCIDENT #'+S.ralphHits+'! -150 SCORE. -22% STABILITY.');tPrint('üí• RALPH HAS ENTERED THE BUILDING!','var(--red)');tPrint('Score: -150 | Stability: -22%','var(--red)');updateMetrics()}

// ‚îÄ‚îÄ EMERGENCY ‚îÄ‚îÄ
function doEmergency(){doGlitch();shakeBody();const list=['s-games','s-status'];const c=document.querySelector('.screen.active').id;const n=list.find(x=>x!==c)||'s-games';setTimeout(()=>goScreen(n),300);addLog('warn','‚ö° EMERGENCY JUMP!')}

// ‚îÄ‚îÄ FINISH ‚îÄ‚îÄ
function doFinish(){
  if(S.timerIv)clearInterval(S.timerIv);
  const el=Math.floor((Date.now()-S.startMs)/1000);
  const bonus=Math.max(0,600-el*2);
  S.score+=bonus;
  const mm=String(Math.floor(el/60)).padStart(2,'0');
  const ss=String(el%60).padStart(2,'0');
  document.getElementById('v-score').textContent='FINAL SCORE: '+S.score+' pts  (TIME BONUS: +'+bonus+')';
  document.getElementById('v-sub').innerHTML='ALL GLITCHES REPAIRED!<br>TIME: '+mm+':'+ss+'<br>FIX-IT FELIX APPROVES.';
  addLog('success','GAME COMPLETE! Final Score: '+S.score);
  updateMetrics();
  document.getElementById('victory').classList.add('show');
  spawnConfetti();
  document.getElementById('v-name').value='';
}

// ‚îÄ‚îÄ SAVE TO LEADERBOARD ‚îÄ‚îÄ
function saveToLeaderboard(){
  const name=document.getElementById('v-name').value.trim().toUpperCase().replace(/[^A-Z0-9_]/g,'').slice(0,12);
  if(!name){document.getElementById('v-name').focus();return;}
  const el=Math.floor((Date.now()-S.startMs)/1000);
  const mm=String(Math.floor(el/60)).padStart(2,'0');
  const ss=String(el%60).padStart(2,'0');
  try {
    const existing=JSON.parse(localStorage.getItem('gcs_scores')||'[]');
    existing.push({name,score:S.score,time:mm+':'+ss,game:S.game?.id||'all',ralphhits:S.ralphHits});
    existing.sort((a,b)=>b.score-a.score);
    localStorage.setItem('gcs_scores',JSON.stringify(existing.slice(0,20)));
    document.getElementById('v-name').value='';
    document.getElementById('v-name').placeholder='‚úÖ SCORE SAVED!';
    addLog('success','Score saved to leaderboard: '+name+' ‚Äî '+S.score+' pts');
  } catch(e){ addLog('error','Could not save score.'); }
}

function playAgain(){document.getElementById('victory').classList.remove('show');document.getElementById('confetti').innerHTML='';S={stability:73,game:null,char:null,glitches:[],fixed:0,ralphHits:0,score:0,autoLeft:3,startMs:Date.now(),stabIv:null,timerIv:null,curIdx:null};document.getElementById('log-list').innerHTML='';document.getElementById('terminal').innerHTML='';document.getElementById('proceed-btn').disabled=true;goScreen('s-games');startStab();startTimer();addLog('info','System reset. Ralph is still out there.')}
function goStatus(){document.getElementById('victory').classList.remove('show');document.getElementById('confetti').innerHTML='';goScreen('s-status')}

// ‚îÄ‚îÄ STABILITY ‚îÄ‚îÄ
function startStab(){if(S.stabIv)clearInterval(S.stabIv);S.stabIv=setInterval(()=>{S.stability=Math.max(0,S.stability-.12);const pct=Math.round(S.stability);const fill=document.getElementById('stab-fill');fill.style.width=pct+'%';document.getElementById('stab-pct').textContent=pct+'%';if(pct<25)fill.style.background='var(--red)';else if(pct<50)fill.style.background='linear-gradient(90deg,var(--red),#ff8800)';else fill.style.background='linear-gradient(90deg,var(--red),var(--gold))';updateMetrics();if(pct===0){doGlitch();shakeBody();addLog('error','‚ö† STABILITY ZERO ‚Äî RALPH WINS! System emergency reset.');S.stability=28}},180)}

// ‚îÄ‚îÄ TIMER ‚îÄ‚îÄ
function startTimer(){if(S.timerIv)clearInterval(S.timerIv);const t0=Date.now();S.timerIv=setInterval(()=>{const el=Math.floor((Date.now()-t0)/1000),h=Math.floor(el/3600),m=Math.floor((el%3600)/60),s=el%60;document.getElementById('m-uptime').textContent=h+':'+String(m).padStart(2,'0')+':'+String(s).padStart(2,'0');const td=document.getElementById('repair-timer');if(td)td.textContent='TIME: '+String(m).padStart(2,'0')+':'+String(s).padStart(2,'0')},1000)}

// ‚îÄ‚îÄ RANDOM GLITCH ‚îÄ‚îÄ
setInterval(()=>{if(Math.random()<.35)doGlitch()},11000);

// ‚îÄ‚îÄ START ‚îÄ‚îÄ
window.addEventListener('load',()=>setTimeout(runBoot,400));
</script>
</body>
</html>